<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>黄金计算器</title>
</head>

<body>
    <h2 style="text-align: center;">黄金计算器</h2>
    <form action="">
        <table style="margin: 0 auto;">
            <tr>
                <td><label for="principal">本金：</label></td>
                <td><input type="number" id="principal" name="principal"></td>
            </tr>
            <tr>
                <td><label for="buy_price">买入价：</label></td>
                <td><input type="number" id="buy_price" name="buy_price"></td>
            </tr>
            <tr>
                <td><label for="sell_price">卖出价：</label></td>
                <td><input type="number" id="sell_price" name="sell_price"></td>
            </tr>
            <tr>
                <td><label>克重：</label></td>
                <td><span id="weight"></span></td>
            </tr>
            <tr>
                <td><label>差额：</label></td>
                <td><span id="difference"></span></td>
            </tr>
            <tr>
                <td><label>利润：</label></td>
                <td><span id="profit"></span></td>
            </tr>
            <tr>
                <td><label>年利率：</label></td>
                <td><span id="annual_interest_rate"></span></td>
            </tr>
            <tr>
                <td><label>手续费：</label></td>
                <td><span id="handling_fee"></span></td>
            </tr>
        </table>
    </form>

    <script>
        // 计算函数
        function calculate() {
            var principal = parseFloat(document.getElementById("principal").value);
            var buy_price = parseFloat(document.getElementById("buy_price").value);
            var sell_price = parseFloat(document.getElementById("sell_price").value);

            if (isNaN(principal) || isNaN(buy_price) || isNaN(sell_price)) {
                document.getElementById("weight").innerHTML = "输入有误";
                document.getElementById("difference").innerHTML = "输入有误";
                document.getElementById("profit").innerHTML = "输入有误";
                document.getElementById("annual_interest_rate").innerHTML = "输入有误";
                document.getElementById("handling_fee").innerHTML = "输入有误";
                return;
            }

            var weight = principal / buy_price;
            var difference = sell_price - buy_price;
            var handling_fee = weight * 2.5;
            var profit = weight * difference - handling_fee;
            var annual_interest_rate = (profit / principal) * 100;

            document.getElementById("weight").innerHTML = weight.toFixed(2);
            document.getElementById("difference").innerHTML = difference.toFixed(2);
            document.getElementById("profit").innerHTML = profit.toFixed(2);
            document.getElementById("annual_interest_rate").innerHTML = annual_interest_rate.toFixed(2) + "%";
            document.getElementById("handling_fee").innerHTML = handling_fee.toFixed(2);
        }

        // 为输入框添加输入事件监听
        document.getElementById("principal").addEventListener("input", calculate);
        document.getElementById("buy_price").addEventListener("input", calculate);
        document.getElementById("sell_price").addEventListener("input", calculate);
    </script>
</body>

</html>
